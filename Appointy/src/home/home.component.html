<div class="d-flex flex-column fullscreen background">

  <Appointy-event-details-modal *ngIf="eventDetailsVisible" [eventDetails]="eventDetails" [events]="calendarEvents"/>

  <div class="d-flex flex-row justify-content-center align-items-center">
    <button class="me-4 btn btn-secondary btn-sm btn-rounded" (click)="prevWeek()"><i class="fa-solid fa-arrow-left"></i></button>
    <h4 class="m-0 date_display">{{ currentDate.getFullYear() }} {{ middleDate.toLocaleDateString(constService.LOCALE, {month: 'long'}) }} </h4>
    <button class="ms-4 btn btn-secondary btn-sm btn-rounded" (click)="nextWeek()"><i class="fa-solid fa-arrow-right"></i></button>
  </div>

  <div class="d-flex flex-row fullscreen_lite">

    <div class="d-flex flex-column grow">

      <div class="d-flex flex-row">
        <div class="filler hours_column"></div>
        @for (day of weekdays; track $index) {
          <Appointy-weekday [day]="day" [date]="dates[$index].getDate()" class="weekdays"/>
        }
      </div>

      <div class="d-flex flex-row grow scrollable" id="scrollable">
        <div class="hours_column">
          <Appointy-hours-column/>
        </div>
        @for (date of dates; track $index) {
          <div class="d-flex flex-column grow" >
            <Appointy-calendar-column [date]="date" class="day_column" [id]="'calendarColumn' + date.getDate()" (loaded)="handleColumnLoad($event, $index)"/>
          </div>
        }
      </div>
    </div>
  </div>
</div>

